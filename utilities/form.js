export class Form{static getData(e=null){if(null==e||null==document.querySelector(e))return null;let t=new FormData(document.querySelector(e)),r={};for(var[a,l]of t)switch(l){case parseInt(l):r[a]=parseInt(l);break;case parseFloat(l):r[a]=parseFloat(l);break;case"on":r[a]=!0;break;default:null==l&&(l=""),r[a]=l}return r}static setData(e,t){let r=document.querySelector(e);if(null!=r)for(let e in t){let a=r.querySelector(`[name=${e}]`);if(null!=a){let r=a.getAttribute("type");switch(null==r&&"SELECT"==a.tagName&&(r="select"),r){case"checkbox":case"radio":a.checked=t[e];break;case"date":let r=new Date(t[e]).toLocaleDateString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-");a.value=r;break;case"select":default:a.value=t[e];case"file":}}}}static clear(e,t={classNameError:"form__error",classNameValid:"form__valid"}){let r=document.querySelector(e);null!=r&&(r.reset(),r.querySelectorAll("input").forEach((e=>{e.classList.remove(t.classNameError),e.classList.remove(t.classNameValid)})))}static setValidate(e,t={classNameError:"form__error",classNameValid:"form__valid"}){e.querySelectorAll("input").forEach((e=>{e.addEventListener("blur",(e=>{let r=!0,a=e.srcElement.getAttribute("type"),l=e.srcElement.value,s=e.srcElement.getAttribute("regex"),c=e.srcElement.getAttribute("required");if(null!=c&&"true"==c&&(null!=l&&""!=l||(r=!1)),null!=s){new RegExp(s).test(l)||(r=!1)}switch(a){case"number":isNaN(l)&&(r=!1);break;case"date":isNaN(Date.parse(l))&&(r=!1)}let i=e.srcElement.getAttribute("min"),n=e.srcElement.getAttribute("max");null!=i&&l<i&&(r=!1),null!=n&&l>n&&(r=!1),r?(e.srcElement.classList.remove(t.classNameError),e.srcElement.classList.add(t.classNameValid)):(e.srcElement.classList.add(t.classNameError),e.srcElement.classList.remove(t.classNameValid))}))}))}static validate(e,t={classNameError:"form__error",classNameValid:"form__valid"}){let r=e.querySelectorAll("input"),a=!0;return r.forEach((e=>{e.dispatchEvent(new Event("blur"))})),r.forEach((e=>{e.classList.contains(t.classNameError)&&(a=!1)})),a}}
